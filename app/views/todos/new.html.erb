<% @page = 'new' %>
<% @page_title = 'Create a new ToDo' %>
<% @page_lead_text = 'Never forget to buy milk anymore! Create your todo here.' %>


<%= form_for(@todo, :html => { :class => 'form-horizontal' } ) do |f| %>

  <div class="control-group">
    <%= f.label('Title', :class => 'control-label') %>
    <div class="controls">
      <%= f.text_field(:title, :placeholder => 'Title', :class => 'input-block-level') %>
    </div>
  </div>

  <div class="control-group">
    <%= f.label('Due Date', :class => 'control-label') %>
    <div class="controls">
      <%= f.date_select(:due_date, :placeholder => 'Due Date', :class => 'input-block-level', :order => [:day, :month, :year])%>
    </div>
  </div>

  <div class="control-group">
    <div class='control-group'>
      <%= f.label('Due Time', :class => 'control-label') %>
      <div class="controls">
        <div id="due_date_switch"  class="switch switch-mini">
          <%= f.check_box :'has_due_time' %>
        </div>
      </div>
    </div>
    <div id="due_time_form" class='collapse'>
      <div class="controls">
        <%= f.time_select(:due_date, :placeholder => 'Due Time', :class => 'input-block-level', :order => [:minute, :hour])%>
      </div>
    </div>
  </div>

  <div class="control-group">
    <%= f.label('Description', :class => 'control-label') %>
    <div class="controls">
      <%= f.text_area(:description, :placeholder => 'Description', :rows => '3', :class => 'input-block-level') %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit('Create', :class => 'btn btn-large btn-primary') %>
    <%= f.button('Cancel', :class => 'btn') %>
  </div>
<% end %>

<p id="ttes">sdasd</p>

<script>

  $('#due_date_switch').on('switch-change', function (e, data) {
    var $el = $(data.el), value = data.value;
    if(value) {
      $('#due_time_form').collapse('show');
    } else {
      $('#due_time_form').collapse('hide');
    }
  });

</script>